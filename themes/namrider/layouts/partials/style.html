{{ $options := (dict "targetPath" "css/theme.css" "outputStyle" "compressed" "enableSourceMap" true) }}
{{ $style := resources.Get "sass/theme.scss" | toCSS $options | postCSS | minify | fingerprint }}
<link rel="stylesheet" href="{{ $style.RelPermalink }}" integrity="{{ $style.Data.Integrity }}">
<link rel="stylesheet" href="https://use.typekit.net/wzw2mmy.css">
{{ if .Params.datatables }}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" media="print" onload="this.media='all'">
{{ end }}

<!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

{{ $ffo := resources.Get "js/fontfaceobserver.js" }}
{{ $lazy := resources.Get "js/lazysizes.min.js" }}
{{ $fontawesome := resources.Get "js/all.js" }}
{{ $update_el := resources.Get "js/update_el.js" }}
{{ $back2top := resources.Get "js/back_to_top.js" }}
{{ $validate := resources.Get "js/validator.js" }}
{{ $contact := resources.Get "js/contact.js" }}
{{ $movietable := resources.Get "js/datatable_movie.js" }}
{{ $carousel_height := resources.Get "js/normalise_slide_heights.js" }}
{{ $priorityJS := slice $ffo | resources.Concat "js/priority.js" }}
{{ $defaultJS := slice $lazy $update_el | resources.Concat "js/global.js" }}
{{ $contactJS := slice $validate $contact | resources.Concat "js/page_contact.js" }}
{{ $tablesJS := slice $movietable | resources.Concat "js/page_tables.js" }}
{{ $carouselJS := slice $carousel_height | resources.Concat "js/carousel_height.js"}}
{{ $script := $defaultJS }}
{{ $script_priority := $priorityJS }}
{{ $script_contact := $contactJS }}
{{ $script_tables := $tablesJS }}
{{ $script_carousel := $carouselJS }}
{{ $priorityJS := $script_priority | resources.Minify | resources.Fingerprint }}
{{ $globalJS := $script | resources.Minify | resources.Fingerprint }}
{{ $page_contactJS := $script_contact | resources.Minify | resources.Fingerprint }}
{{ $page_tablesJS := $script_tables | resources.Minify | resources.Fingerprint }}
{{ $page_carouselJS := $script_carousel | resources.Minify | resources.Fingerprint }}
<script src="{{ $priorityJS.Permalink }}"></script>
<script type="text/javascript">
    const sourcesansproObserver = new FontFaceObserver('source-sans-pro');
  
    Promise.all([
      sourcesansproObserver.load()
    ]).then(function(){
      document.documentElement.className += " fonts-loaded";
    });
  </script>
<script async src="{{ $globalJS.Permalink }}"></script>
{{ if .Params.datatables }}
    <script defer type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script defer type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script defer src="{{ $page_tablesJS.Permalink }}"></script>
{{ end }}
{{ if eq .Kind "home" }}
    <script defer src="{{ $page_carouselJS.Permalink }}"></script>
{{ end }}
{{ if eq .Type "contact" }}
    <script defer src="{{ $page_contactJS.Permalink }}"></script>
{{ end }}
{{ if eq .Type "news" }}
    <script async src="//platform.twitter.com/widgets.js"></script>
{{ end }}
{{ if eq .Type "posts" }}
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script defer type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-588ddf0c24b32ae3"></script>
{{ end }}